  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUsersMessagesInboxesOutboxesAndPayments (20190626153436)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "is_patient" boolean DEFAULT 't', "is_doctor" boolean DEFAULT 'f', "is_admin" boolean DEFAULT 'f', "first_name" varchar, "last_name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "messages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "body" text, "outbox_id" integer, "inbox_id" integer, "read" boolean DEFAULT 'f', "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_messages_on_outbox_id" ON "messages" ("outbox_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_messages_on_outbox_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_messages_on_outbox_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_messages_on_inbox_id" ON "messages" ("inbox_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "inboxes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_inboxes_on_user_id" ON "inboxes" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "outboxes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_outboxes_on_user_id" ON "outboxes" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "payments" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_payments_on_user_id" ON "payments" ("user_id")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190626153436"]]
  [1m[35m (1.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-05-28 05:50:08.047846"], ["updated_at", "2020-05-28 05:50:08.047846"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_inboxes_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_inboxes_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_messages_on_inbox_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_messages_on_inbox_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_messages_on_outbox_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_messages_on_outbox_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_outboxes_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_outboxes_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_payments_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_payments_on_user_id' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("first_name", "last_name", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["first_name", "Luke"], ["last_name", "Skywalker"], ["created_at", "2020-05-28 05:50:16.955752"], ["updated_at", "2020-05-28 05:50:16.955752"]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "inboxes" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "outboxes" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("is_patient", "is_doctor", "first_name", "last_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["is_patient", "f"], ["is_doctor", "t"], ["first_name", "Leia"], ["last_name", "Organa"], ["created_at", "2020-05-28 05:50:16.960293"], ["updated_at", "2020-05-28 05:50:16.960293"]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "inboxes" ("user_id") VALUES (?)[0m  [["user_id", 2]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "outboxes" ("user_id") VALUES (?)[0m  [["user_id", 2]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("is_patient", "is_admin", "first_name", "last_name", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["is_patient", "f"], ["is_admin", "t"], ["first_name", "Obi-wan"], ["last_name", "Kenobi"], ["created_at", "2020-05-28 05:50:16.963941"], ["updated_at", "2020-05-28 05:50:16.963941"]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "inboxes" ("user_id") VALUES (?)[0m  [["user_id", 3]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "outboxes" ("user_id") VALUES (?)[0m  [["user_id", 3]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("body", "outbox_id", "inbox_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["body", "Thanks for your order. I will in touch shortly after reviewing your treatment application."], ["outbox_id", 2], ["inbox_id", 1], ["created_at", "2020-05-28 05:50:16.975410"], ["updated_at", "2020-05-28 05:50:16.975410"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
Started GET "/" for ::1 at 2020-05-28 09:30:41 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by MessagesController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."is_doctor" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["is_doctor", "t"], ["LIMIT", 1]]
  [1m[36mInbox Load (0.7ms)[0m  [1m[34mSELECT  "inboxes".* FROM "inboxes" WHERE "inboxes"."user_id" = ? LIMIT ?[0m  [["user_id", 2], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."inbox_id" = ?[0m  [["inbox_id", 2]]
  Rendering messages/index.html.erb within layouts/application
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT  "messages".* FROM "messages" WHERE "messages"."inbox_id" = ? ORDER BY "messages"."created_at" DESC LIMIT ? OFFSET ?[0m  [["inbox_id", 2], ["LIMIT", 9], ["OFFSET", 0]]
  Rendered messages/index.html.erb within layouts/application (134.0ms)
Completed 500 Internal Server Error in 206ms (ActiveRecord: 3.4ms)


  
ActionView::Template::Error (undefined method `pagy_bulma_nav' for #<#<Class:0x00007f8d50301850>:0x00007f8d5030aef0>):
    15:   <small class="d-block text-right mt-3">
    16:     <a href="#">All updates</a>
    17:   </small>
    18:   <%= pagy_bulma_nav(@pagy).html_safe %>
    19: </div>
  
app/views/messages/index.html.erb:18:in `_app_views_messages_index_html_erb__81590727041520213_70122456224360'
  Rendering /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (16.0ms)
  Rendering /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.8ms)
  Rendering /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (44.3ms)
Started GET "/" for ::1 at 2020-05-28 09:33:18 +0300
Processing by MessagesController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."is_doctor" = ? ORDER BY "users"."id" ASC LIMIT ?[0m  [["is_doctor", "t"], ["LIMIT", 1]]
  [1m[36mInbox Load (0.5ms)[0m  [1m[34mSELECT  "inboxes".* FROM "inboxes" WHERE "inboxes"."user_id" = ? LIMIT ?[0m  [["user_id", 2], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."inbox_id" = ?[0m  [["inbox_id", 2]]
  Rendering messages/index.html.erb within layouts/application
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT  "messages".* FROM "messages" WHERE "messages"."inbox_id" = ? ORDER BY "messages"."created_at" DESC LIMIT ? OFFSET ?[0m  [["inbox_id", 2], ["LIMIT", 9], ["OFFSET", 0]]
  Rendered messages/index.html.erb within layouts/application (124.1ms)
Completed 500 Internal Server Error in 160ms (ActiveRecord: 3.2ms)


  
ActionView::Template::Error (undefined method `pagy_bulma_nav' for #<#<Class:0x00007f8d4d13b1b8>:0x00007f8d4d13a0d8>):
    15:   <small class="d-block text-right mt-3">
    16:     <a href="#">All updates</a>
    17:   </small>
    18:   <%= pagy_bulma_nav(@pagy).html_safe %>
    19: </div>
  
app/views/messages/index.html.erb:18:in `_app_views_messages_index_html_erb__81590727041520213_70122430127240'
  Rendering /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout
  Rendering /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (6.3ms)
  Rendering /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.2ms)
  Rendering /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.7ms)
  Rendered /Users/kirillvoitulevich/.rvm/gems/ruby-2.6.0/gems/actionpack-5.0.7.2/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (26.9ms)
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddUnreadMessagesCounterToInbox (20200528064555)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "inboxes" ADD "unread_messages" integer[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20200528064555"]]
  [1m[35m (1.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to UpdateAllMessagesReadStatus (20200528064611)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "messages" SET "read" = 't'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20200528064611"]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_inboxes_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_inboxes_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_messages_on_inbox_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_messages_on_inbox_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_messages_on_outbox_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_messages_on_outbox_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_outboxes_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_outboxes_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_payments_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_payments_on_user_id' AND type='index'
[0m
